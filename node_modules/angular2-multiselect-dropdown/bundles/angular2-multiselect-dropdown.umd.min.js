!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("rxjs"),require("@tweenjs/tween.js"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("angular2-multiselect-dropdown",["exports","@angular/core","@angular/forms","@angular/common","rxjs","@tweenjs/tween.js","rxjs/operators"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["angular2-multiselect-dropdown"]={},e.ng.core,e.ng.forms,e.ng.common,e.rxjs,e.tween,e.rxjs.operators)}(this,(function(e,t,i,n,s,l,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var a=o(l),c=function(e,t){this.status=e,this.body=t},h=function(){function e(e){this._elementRef=e,this.clickOutside=new t.EventEmitter}return e.prototype.onClick=function(e,t){t&&(this._elementRef.nativeElement.contains(t)||this.clickOutside.emit(e))},e}();h.decorators=[{type:t.Directive,args:[{selector:"[clickOutside]"}]}],h.ctorParameters=function(){return[{type:t.ElementRef}]},h.propDecorators={clickOutside:[{type:t.Output}],onClick:[{type:t.HostListener,args:["document:click",["$event","$event.target"]]},{type:t.HostListener,args:["document:touchstart",["$event","$event.target"]]}]};var d=function(){function e(e){this._elementRef=e,this.scroll=new t.EventEmitter}return e.prototype.onClick=function(e,t){this.scroll.emit(e)},e}();d.decorators=[{type:t.Directive,args:[{selector:"[scroll]"}]}],d.ctorParameters=function(){return[{type:t.ElementRef}]},d.propDecorators={scroll:[{type:t.Output}],onClick:[{type:t.HostListener,args:["scroll",["$event"]]}]};var p=function(){function e(e){this.el=e}return e.prototype.ngOnInit=function(){this.el.nativeElement.style.top=this.styleVal},e.prototype.ngOnChanges=function(){this.el.nativeElement.style.top=this.styleVal},e}();p.decorators=[{type:t.Directive,args:[{selector:"[styleProp]"}]}],p.ctorParameters=function(){return[{type:t.ElementRef}]},p.propDecorators={styleVal:[{type:t.Input,args:["styleProp"]}]};var g=function(){function e(e){this.el=e}return e.prototype.ngOnInit=function(){this.height&&(this.el.nativeElement.style.bottom=parseInt(this.height+15+"")+"px")},e.prototype.ngOnChanges=function(){this.height&&(this.el.nativeElement.style.bottom=parseInt(this.height+15+"")+"px")},e}();g.decorators=[{type:t.Directive,args:[{selector:"[setPosition]"}]}],g.ctorParameters=function(){return[{type:t.ElementRef}]},g.propDecorators={height:[{type:t.Input,args:["setPosition"]}]};var u=function(){function e(){this.filteredData=[],this.subject=new s.Subject}return e.prototype.setData=function(e){this.filteredData=e,this.subject.next(e)},e.prototype.getData=function(){return this.subject.asObservable()},e.prototype.getFilteredData=function(){return this.filteredData&&this.filteredData.length>0?this.filteredData:[]},e}();u.decorators=[{type:t.Injectable}];var m=function(){function e(e){this.ds=e,this.filteredList=[]}return e.prototype.transform=function(e,t,i){var n=this;return e&&t&&""!=t?(this.filteredList=e.filter((function(e){return n.applyFilter(e,t,i)})),this.filteredList):e},e.prototype.applyFilter=function(e,t,i){var n=!1;if(i.length>0)if(e.grpTitle)n=!0;else for(var s=0;s<i.length;s++)t&&e[i[s]]&&""!=e[i[s]]&&e[i[s]].toString().toLowerCase().indexOf(t.toLowerCase())>=0&&(n=!0);else if(e.grpTitle)n=!0;else for(var l in e)t&&e[l]&&e[l].toString().toLowerCase().indexOf(t.toLowerCase())>=0&&(n=!0);return n},e}();m.decorators=[{type:t.Pipe,args:[{name:"listFilter",pure:!0}]}],m.ctorParameters=function(){return[{type:u}]};var f=function(){};f.decorators=[{type:t.Component,args:[{selector:"c-item",template:""}]}],f.ctorParameters=function(){return[]},f.propDecorators={template:[{type:t.ContentChild,args:[t.TemplateRef,{static:!0}]}]};var v=function(){};v.decorators=[{type:t.Component,args:[{selector:"c-badge",template:""}]}],v.ctorParameters=function(){return[]},v.propDecorators={template:[{type:t.ContentChild,args:[t.TemplateRef,{static:!0}]}]};var b=function(){};b.decorators=[{type:t.Component,args:[{selector:"c-search",template:""}]}],b.ctorParameters=function(){return[]},b.propDecorators={template:[{type:t.ContentChild,args:[t.TemplateRef,{static:!0}]}]};var y=function(){function e(e){this.viewContainer=e}return e.prototype.ngOnInit=function(){this.view=this.viewContainer.createEmbeddedView(this.data.template,{$implicit:this.data,item:this.item})},e.prototype.ngOnDestroy=function(){this.view.destroy()},e}();y.decorators=[{type:t.Component,args:[{selector:"c-templateRenderer",template:""}]}],y.ctorParameters=function(){return[{type:t.ViewContainerRef}]},y.propDecorators={data:[{type:t.Input}],item:[{type:t.Input}]};var x=function(){};function S(){return{scrollThrottlingTime:0,scrollDebounceTime:0,scrollAnimationTime:750,checkResizeInterval:1e3,resizeBypassRefreshThreshold:5,modifyOverflowStyleOfParentScroll:!0,stripedTable:!1}}x.decorators=[{type:t.Component,args:[{selector:"c-icon",template:'<svg *ngIf="name == \'remove\'" width="100%" height="100%" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                        viewBox="0 0 47.971 47.971" style="enable-background:new 0 0 47.971 47.971;" xml:space="preserve">\n                        <g>\n                            <path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88\n                                c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242\n                                C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879\n                                s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"/>\n                        </g>\n                    </svg>\n            <svg *ngIf="name == \'angle-down\'" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="100%" height="100%" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve">\n<g>\n\t<g id="_x31_0_34_">\n\t\t<g>\n\t\t\t<path d="M604.501,134.782c-9.999-10.05-26.222-10.05-36.221,0L306.014,422.558L43.721,134.782\n\t\t\t\tc-9.999-10.05-26.223-10.05-36.222,0s-9.999,26.35,0,36.399l279.103,306.241c5.331,5.357,12.422,7.652,19.386,7.296\n\t\t\t\tc6.988,0.356,14.055-1.939,19.386-7.296l279.128-306.268C614.5,161.106,614.5,144.832,604.501,134.782z"/>\n\t\t</g>\n\t</g>\n</g>\n</svg>\n<svg *ngIf="name == \'angle-up\'" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="100%" height="100%" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve">\n<g>\n\t<g id="_x39__30_">\n\t\t<g>\n\t\t\t<path d="M604.501,440.509L325.398,134.956c-5.331-5.357-12.423-7.627-19.386-7.27c-6.989-0.357-14.056,1.913-19.387,7.27\n\t\t\t\tL7.499,440.509c-9.999,10.024-9.999,26.298,0,36.323s26.223,10.024,36.222,0l262.293-287.164L568.28,476.832\n\t\t\t\tc9.999,10.024,26.222,10.024,36.221,0C614.5,466.809,614.5,450.534,604.501,440.509z"/>\n\t\t</g>\n\t</g>\n</g>\n\n</svg>\n<svg *ngIf="name == \'search\'" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="100%" height="100%" viewBox="0 0 615.52 615.52" style="enable-background:new 0 0 615.52 615.52;"\n\t xml:space="preserve">\n<g>\n\t<g>\n\t\t<g id="Search__x28_and_thou_shall_find_x29_">\n\t\t\t<g>\n\t\t\t\t<path d="M602.531,549.736l-184.31-185.368c26.679-37.72,42.528-83.729,42.528-133.548C460.75,103.35,357.997,0,231.258,0\n\t\t\t\t\tC104.518,0,1.765,103.35,1.765,230.82c0,127.47,102.753,230.82,229.493,230.82c49.53,0,95.271-15.944,132.78-42.777\n\t\t\t\t\tl184.31,185.366c7.482,7.521,17.292,11.291,27.102,11.291c9.812,0,19.62-3.77,27.083-11.291\n\t\t\t\t\tC617.496,589.188,617.496,564.777,602.531,549.736z M355.9,319.763l-15.042,21.273L319.7,356.174\n\t\t\t\t\tc-26.083,18.658-56.667,28.526-88.442,28.526c-84.365,0-152.995-69.035-152.995-153.88c0-84.846,68.63-153.88,152.995-153.88\n\t\t\t\t\ts152.996,69.034,152.996,153.88C384.271,262.769,374.462,293.526,355.9,319.763z"/>\n\t\t\t</g>\n\t\t</g>\n\t</g>\n</g>\n\n</svg>\n<svg *ngIf="name == \'clear\'" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 51.976 51.976" style="enable-background:new 0 0 51.976 51.976;" xml:space="preserve">\n<g>\n\t<path d="M44.373,7.603c-10.137-10.137-26.632-10.138-36.77,0c-10.138,10.138-10.137,26.632,0,36.77s26.632,10.138,36.77,0\n\t\tC54.51,34.235,54.51,17.74,44.373,7.603z M36.241,36.241c-0.781,0.781-2.047,0.781-2.828,0l-7.425-7.425l-7.778,7.778\n\t\tc-0.781,0.781-2.047,0.781-2.828,0c-0.781-0.781-0.781-2.047,0-2.828l7.778-7.778l-7.425-7.425c-0.781-0.781-0.781-2.048,0-2.828\n\t\tc0.781-0.781,2.047-0.781,2.828,0l7.425,7.425l7.071-7.071c0.781-0.781,2.047-0.781,2.828,0c0.781,0.781,0.781,2.047,0,2.828\n\t\tl-7.071,7.071l7.425,7.425C37.022,34.194,37.022,35.46,36.241,36.241z"/>\n</g>\n</svg>',encapsulation:t.ViewEncapsulation.None}]}],x.propDecorators={name:[{type:t.Input}]};var w=function(){function e(e,i,s,l,r,o){this.element=e,this.renderer=i,this.zone=s,this.changeDetectorRef=l,this.window=window,this.executeRefreshOutsideAngularZone=!1,this._enableUnequalChildrenSizes=!1,this.useMarginInsteadOfTranslate=!1,this.ssrViewportWidth=1920,this.ssrViewportHeight=1080,this._bufferAmount=0,this._items=[],this.compareItems=function(e,t){return e===t},this.vsUpdate=new t.EventEmitter,this.vsChange=new t.EventEmitter,this.vsStart=new t.EventEmitter,this.vsEnd=new t.EventEmitter,this.calculatedScrollbarWidth=0,this.calculatedScrollbarHeight=0,this.padding=0,this.previousViewPort={},this.cachedPageSize=0,this.previousScrollNumberElements=0,this.isAngularUniversalSSR=n.isPlatformServer(r),this.scrollThrottlingTime=o.scrollThrottlingTime,this.scrollDebounceTime=o.scrollDebounceTime,this.scrollAnimationTime=o.scrollAnimationTime,this.scrollbarWidth=o.scrollbarWidth,this.scrollbarHeight=o.scrollbarHeight,this.checkResizeInterval=o.checkResizeInterval,this.resizeBypassRefreshThreshold=o.resizeBypassRefreshThreshold,this.modifyOverflowStyleOfParentScroll=o.modifyOverflowStyleOfParentScroll,this.stripedTable=o.stripedTable,this.horizontal=!1,this.resetWrapGroupDimensions()}return Object.defineProperty(e.prototype,"viewPortInfo",{get:function(){var e=this.previousViewPort||{};return{startIndex:e.startIndex||0,endIndex:e.endIndex||0,scrollStartPosition:e.scrollStartPosition||0,scrollEndPosition:e.scrollEndPosition||0,maxScrollPosition:e.maxScrollPosition||0,startIndexWithBuffer:e.startIndexWithBuffer||0,endIndexWithBuffer:e.endIndexWithBuffer||0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableUnequalChildrenSizes",{get:function(){return this._enableUnequalChildrenSizes},set:function(e){this._enableUnequalChildrenSizes!==e&&(this._enableUnequalChildrenSizes=e,this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferAmount",{get:function(){return"number"==typeof this._bufferAmount&&this._bufferAmount>=0?this._bufferAmount:this.enableUnequalChildrenSizes?5:0},set:function(e){this._bufferAmount=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollThrottlingTime",{get:function(){return this._scrollThrottlingTime},set:function(e){this._scrollThrottlingTime=e,this.updateOnScrollFunction()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollDebounceTime",{get:function(){return this._scrollDebounceTime},set:function(e){this._scrollDebounceTime=e,this.updateOnScrollFunction()},enumerable:!1,configurable:!0}),e.prototype.updateOnScrollFunction=function(){var e=this;this.scrollDebounceTime?this.onScroll=this.debounce((function(){e.refresh_internal(!1)}),this.scrollDebounceTime):this.scrollThrottlingTime?this.onScroll=this.throttleTrailing((function(){e.refresh_internal(!1)}),this.scrollThrottlingTime):this.onScroll=function(){e.refresh_internal(!1)}},Object.defineProperty(e.prototype,"checkResizeInterval",{get:function(){return this._checkResizeInterval},set:function(e){this._checkResizeInterval!==e&&(this._checkResizeInterval=e,this.addScrollEventHandlers())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){e!==this._items&&(this._items=e||[],this.refresh_internal(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"horizontal",{get:function(){return this._horizontal},set:function(e){this._horizontal=e,this.updateDirection()},enumerable:!1,configurable:!0}),e.prototype.revertParentOverscroll=function(){var e=this.getScrollElement();e&&this.oldParentScrollOverflow&&(e.style["overflow-y"]=this.oldParentScrollOverflow.y,e.style["overflow-x"]=this.oldParentScrollOverflow.x),this.oldParentScrollOverflow=void 0},Object.defineProperty(e.prototype,"parentScroll",{get:function(){return this._parentScroll},set:function(e){if(this._parentScroll!==e){this.revertParentOverscroll(),this._parentScroll=e,this.addScrollEventHandlers();var t=this.getScrollElement();this.modifyOverflowStyleOfParentScroll&&t!==this.element.nativeElement&&(this.oldParentScrollOverflow={x:t.style["overflow-x"],y:t.style["overflow-y"]},t.style["overflow-y"]=this.horizontal?"visible":"auto",t.style["overflow-x"]=this.horizontal?"auto":"visible")}},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.addScrollEventHandlers()},e.prototype.ngOnDestroy=function(){this.removeScrollEventHandlers(),this.revertParentOverscroll()},e.prototype.ngOnChanges=function(e){var t=this.cachedItemsLength!==this.items.length;this.cachedItemsLength=this.items.length;var i=!e.items||!e.items.previousValue||0===e.items.previousValue.length;this.refresh_internal(t||i)},e.prototype.ngDoCheck=function(){if(this.cachedItemsLength!==this.items.length)return this.cachedItemsLength=this.items.length,void this.refresh_internal(!0);if(this.previousViewPort&&this.viewPortItems&&this.viewPortItems.length>0){for(var e=!1,t=0;t<this.viewPortItems.length;++t)if(!this.compareItems(this.items[this.previousViewPort.startIndexWithBuffer+t],this.viewPortItems[t])){e=!0;break}e&&this.refresh_internal(!0)}},e.prototype.refresh=function(){this.refresh_internal(!0)},e.prototype.invalidateAllCachedMeasurements=function(){this.wrapGroupDimensions={maxChildSizePerWrapGroup:[],numberOfKnownWrapGroupChildSizes:0,sumOfKnownWrapGroupChildWidths:0,sumOfKnownWrapGroupChildHeights:0},this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0,this.refresh_internal(!1)},e.prototype.invalidateCachedMeasurementForItem=function(e){if(this.enableUnequalChildrenSizes){var t=this.items&&this.items.indexOf(e);t>=0&&this.invalidateCachedMeasurementAtIndex(t)}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1)},e.prototype.invalidateCachedMeasurementAtIndex=function(e){if(this.enableUnequalChildrenSizes){var t=this.wrapGroupDimensions.maxChildSizePerWrapGroup[e];t&&(this.wrapGroupDimensions.maxChildSizePerWrapGroup[e]=void 0,--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=t.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=t.childHeight||0)}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1)},e.prototype.scrollInto=function(e,t,i,n,s){void 0===t&&(t=!0),void 0===i&&(i=0),void 0===n&&(n=void 0),void 0===s&&(s=void 0);var l=this.items.indexOf(e);-1!==l&&this.scrollToIndex(l,t,i,n,s)},e.prototype.scrollToIndex=function(e,t,i,n,s){var l=this;void 0===t&&(t=!0),void 0===i&&(i=0),void 0===n&&(n=void 0),void 0===s&&(s=void 0);var r=5,o=function(){if(--r<=0)s&&s();else{var n=l.calculateDimensions(),a=Math.min(Math.max(e,0),n.itemCount-1);l.previousViewPort.startIndex!==a?l.scrollToIndex_internal(e,t,i,0,o):s&&s()}};this.scrollToIndex_internal(e,t,i,n,o)},e.prototype.scrollToIndex_internal=function(e,t,i,n,s){void 0===t&&(t=!0),void 0===i&&(i=0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),n=void 0===n?this.scrollAnimationTime:n;var l=this.calculateDimensions(),r=this.calculatePadding(e,l)+i;t||(r-=l.wrapGroupsPerPage*l[this._childScrollDim]),this.scrollToPosition(r,n,s)},e.prototype.scrollToPosition=function(e,t,i){var n=this;void 0===t&&(t=void 0),void 0===i&&(i=void 0),e+=this.getElementsOffset(),t=void 0===t?this.scrollAnimationTime:t;var s,l=this.getScrollElement();if(this.currentTween&&(this.currentTween.stop(),this.currentTween=void 0),!t)return this.renderer.setProperty(l,this._scrollType,e),void this.refresh_internal(!1,i);var r={scrollPosition:l[this._scrollType]},o=new a.Tween(r).to({scrollPosition:e},t).easing(a.Easing.Quadratic.Out).onUpdate((function(e){isNaN(e.scrollPosition)||(n.renderer.setProperty(l,n._scrollType,e.scrollPosition),n.refresh_internal(!1))})).onStop((function(){cancelAnimationFrame(s)})).start(),c=function(t){o.isPlaying()&&(o.update(t),r.scrollPosition!==e?n.zone.runOutsideAngular((function(){s=requestAnimationFrame(c)})):n.refresh_internal(!1,i))};c(),this.currentTween=o},e.prototype.getElementSize=function(e){var t=e.getBoundingClientRect(),i=getComputedStyle(e),n=parseInt(i["margin-top"],10)||0,s=parseInt(i["margin-bottom"],10)||0,l=parseInt(i["margin-left"],10)||0,r=parseInt(i["margin-right"],10)||0;return{top:t.top+n,bottom:t.bottom+s,left:t.left+l,right:t.right+r,width:t.width+l+r,height:t.height+n+s}},e.prototype.checkScrollElementResized=function(){var e,t=this.getElementSize(this.getScrollElement());if(this.previousScrollBoundingRect){var i=Math.abs(t.width-this.previousScrollBoundingRect.width),n=Math.abs(t.height-this.previousScrollBoundingRect.height);e=i>this.resizeBypassRefreshThreshold||n>this.resizeBypassRefreshThreshold}else e=!0;e&&(this.previousScrollBoundingRect=t,t.width>0&&t.height>0&&this.refresh_internal(!1))},e.prototype.updateDirection=function(){this.horizontal?(this._invisiblePaddingProperty="width",this._offsetType="offsetLeft",this._pageOffsetType="pageXOffset",this._childScrollDim="childWidth",this._marginDir="margin-left",this._translateDir="translateX",this._scrollType="scrollLeft"):(this._invisiblePaddingProperty="height",this._offsetType="offsetTop",this._pageOffsetType="pageYOffset",this._childScrollDim="childHeight",this._marginDir="margin-top",this._translateDir="translateY",this._scrollType="scrollTop")},e.prototype.debounce=function(e,t){var i=this.throttleTrailing(e,t),n=function(){i.cancel(),i.apply(this,arguments)};return n.cancel=function(){i.cancel()},n},e.prototype.throttleTrailing=function(e,t){var i=void 0,n=arguments,s=function(){var s=this;n=arguments,i||(t<=0?e.apply(s,n):i=setTimeout((function(){i=void 0,e.apply(s,n)}),t))};return s.cancel=function(){i&&(clearTimeout(i),i=void 0)},s},e.prototype.refresh_internal=function(e,t,i){var n=this;if(void 0===t&&(t=void 0),void 0===i&&(i=2),e&&this.previousViewPort&&this.previousViewPort.scrollStartPosition>0){var s=this.previousViewPort,l=this.viewPortItems,r=t;t=function(){var e=n.previousViewPort.scrollLength-s.scrollLength;if(e>0&&n.viewPortItems){var t=l[0],i=n.items.findIndex((function(e){return n.compareItems(t,e)}));if(i>n.previousViewPort.startIndexWithBuffer){for(var o=!1,a=1;a<n.viewPortItems.length;++a)if(!n.compareItems(n.items[i+a],l[a])){o=!0;break}if(!o)return void n.scrollToPosition(n.previousViewPort.scrollStartPosition+e,0,r)}}r&&r()}}this.zone.runOutsideAngular((function(){requestAnimationFrame((function(){e&&n.resetWrapGroupDimensions();var s=n.calculateViewport(),l=e||s.startIndex!==n.previousViewPort.startIndex,r=e||s.endIndex!==n.previousViewPort.endIndex,o=s.scrollLength!==n.previousViewPort.scrollLength,a=s.padding!==n.previousViewPort.padding,c=s.scrollStartPosition!==n.previousViewPort.scrollStartPosition||s.scrollEndPosition!==n.previousViewPort.scrollEndPosition||s.maxScrollPosition!==n.previousViewPort.maxScrollPosition;if(n.previousViewPort=s,o&&n.renderer.setStyle(n.invisiblePaddingElementRef.nativeElement,n._invisiblePaddingProperty,s.scrollLength+"px"),a&&(n.useMarginInsteadOfTranslate?n.renderer.setStyle(n.contentElementRef.nativeElement,n._marginDir,s.padding+"px"):(n.renderer.setStyle(n.contentElementRef.nativeElement,"transform",n._translateDir+"("+s.padding+"px)"),n.renderer.setStyle(n.contentElementRef.nativeElement,"webkitTransform",n._translateDir+"("+s.padding+"px)"))),n.headerElementRef){var h=n.getScrollElement()[n._scrollType],d=n.getElementsOffset(),p=Math.max(h-s.padding-d+n.headerElementRef.nativeElement.clientHeight,0);n.renderer.setStyle(n.headerElementRef.nativeElement,"transform",n._translateDir+"("+p+"px)"),n.renderer.setStyle(n.headerElementRef.nativeElement,"webkitTransform",n._translateDir+"("+p+"px)")}var g=l||r?{startIndex:s.startIndex,endIndex:s.endIndex,scrollStartPosition:s.scrollStartPosition,scrollEndPosition:s.scrollEndPosition,startIndexWithBuffer:s.startIndexWithBuffer,endIndexWithBuffer:s.endIndexWithBuffer,maxScrollPosition:s.maxScrollPosition}:void 0;if(l||r||c){var u=function(){n.viewPortItems=s.startIndexWithBuffer>=0&&s.endIndexWithBuffer>=0?n.items.slice(s.startIndexWithBuffer,s.endIndexWithBuffer+1):[],n.vsUpdate.emit(n.viewPortItems),l&&n.vsStart.emit(g),r&&n.vsEnd.emit(g),(l||r)&&(n.changeDetectorRef.markForCheck(),n.vsChange.emit(g)),i>0?n.refresh_internal(!1,t,i-1):t&&t()};n.executeRefreshOutsideAngularZone?u():n.zone.run(u)}else{if(i>0&&(o||a))return void n.refresh_internal(!1,t,i-1);t&&t()}}))}))},e.prototype.getScrollElement=function(){return this.parentScroll instanceof Window?document.scrollingElement||document.documentElement||document.body:this.parentScroll||this.element.nativeElement},e.prototype.addScrollEventHandlers=function(){var e=this;if(!this.isAngularUniversalSSR){var t=this.getScrollElement();this.removeScrollEventHandlers(),this.zone.runOutsideAngular((function(){e.parentScroll instanceof Window?(e.disposeScrollHandler=e.renderer.listen("window","scroll",e.onScroll),e.disposeResizeHandler=e.renderer.listen("window","resize",e.onScroll)):(e.disposeScrollHandler=e.renderer.listen(t,"scroll",e.onScroll),e._checkResizeInterval>0&&(e.checkScrollElementResizedTimer=setInterval((function(){e.checkScrollElementResized()}),e._checkResizeInterval)))}))}},e.prototype.removeScrollEventHandlers=function(){this.checkScrollElementResizedTimer&&clearInterval(this.checkScrollElementResizedTimer),this.disposeScrollHandler&&(this.disposeScrollHandler(),this.disposeScrollHandler=void 0),this.disposeResizeHandler&&(this.disposeResizeHandler(),this.disposeResizeHandler=void 0)},e.prototype.getElementsOffset=function(){if(this.isAngularUniversalSSR)return 0;var e=0;if(this.containerElementRef&&this.containerElementRef.nativeElement&&(e+=this.containerElementRef.nativeElement[this._offsetType]),this.parentScroll){var t=this.getScrollElement(),i=this.getElementSize(this.element.nativeElement),n=this.getElementSize(t);this.horizontal?e+=i.left-n.left:e+=i.top-n.top,this.parentScroll instanceof Window||(e+=t[this._scrollType])}return e},e.prototype.countItemsPerWrapGroup=function(){if(this.isAngularUniversalSSR)return Math.round(this.horizontal?this.ssrViewportHeight/this.ssrChildHeight:this.ssrViewportWidth/this.ssrChildWidth);var e=this.horizontal?"offsetLeft":"offsetTop",t=(this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement).children,i=t?t.length:0;if(0===i)return 1;for(var n=t[0][e],s=1;s<i&&n===t[s][e];)++s;return s},e.prototype.getScrollStartPosition=function(){var e=void 0;return this.parentScroll instanceof Window&&(e=window[this._pageOffsetType]),e||this.getScrollElement()[this._scrollType]||0},e.prototype.resetWrapGroupDimensions=function(){var e=this.wrapGroupDimensions;if(this.invalidateAllCachedMeasurements(),this.enableUnequalChildrenSizes&&e&&0!==e.numberOfKnownWrapGroupChildSizes)for(var t=this.countItemsPerWrapGroup(),i=0;i<e.maxChildSizePerWrapGroup.length;++i){var n=e.maxChildSizePerWrapGroup[i];if(n&&n.items&&n.items.length){if(n.items.length!==t)return;for(var s=!1,l=t*i,r=0;r<t;++r)if(!this.compareItems(n.items[r],this.items[l+r])){s=!0;break}s||(++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=n.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=n.childHeight||0,this.wrapGroupDimensions.maxChildSizePerWrapGroup[i]=n)}}},e.prototype.calculateDimensions=function(){var e=this.getScrollElement();this.calculatedScrollbarHeight=Math.max(Math.min(e.offsetHeight-e.clientHeight,25),this.calculatedScrollbarHeight),this.calculatedScrollbarWidth=Math.max(Math.min(e.offsetWidth-e.clientWidth,25),this.calculatedScrollbarWidth);var t,i,n,s=e.offsetWidth-(this.scrollbarWidth||this.calculatedScrollbarWidth||(this.horizontal?0:25)),l=e.offsetHeight-(this.scrollbarHeight||this.calculatedScrollbarHeight||(this.horizontal?25:0)),r=this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement,o=this.countItemsPerWrapGroup();if(this.isAngularUniversalSSR){s=this.ssrViewportWidth,l=this.ssrViewportHeight,i=this.ssrChildWidth,n=this.ssrChildHeight;var a=Math.max(Math.ceil(s/i),1),c=Math.max(Math.ceil(l/n),1);t=this.horizontal?a:c}else if(this.enableUnequalChildrenSizes){var h=e[this._scrollType]-(this.previousViewPort?this.previousViewPort.padding:0),d=this.previousViewPort.startIndexWithBuffer||0,p=Math.ceil(d/o),g=0,u=0,m=0,f=0;t=0;for(var v=0;v<r.children.length;++v){++d;k=r.children[v],T=this.getElementSize(k);if(g=Math.max(g,T.width),u=Math.max(u,T.height),d%o==0){var b=this.wrapGroupDimensions.maxChildSizePerWrapGroup[p];b&&(--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=b.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=b.childHeight||0),++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;var y=this.items.slice(d-o,d);if(this.wrapGroupDimensions.maxChildSizePerWrapGroup[p]={childWidth:g,childHeight:u,items:y},this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=g,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=u,this.horizontal){var x=Math.min(g,Math.max(s-m,0));if(h>0)x-=S=Math.min(h,x),h-=S;m+=x,x>0&&s>=m&&++t}else{var S,w=Math.min(u,Math.max(l-f,0));if(h>0)w-=S=Math.min(h,w),h-=S;f+=w,w>0&&l>=f&&++t}++p,g=0,u=0}}var I=this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,C=this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;i=this.childWidth||I||s,n=this.childHeight||C||l,this.horizontal?s>m&&(t+=Math.ceil((s-m)/i)):l>f&&(t+=Math.ceil((l-f)/n))}else{if(r.children.length>0){this.childWidth&&this.childHeight||(!this.minMeasuredChildWidth&&s>0&&(this.minMeasuredChildWidth=s),!this.minMeasuredChildHeight&&l>0&&(this.minMeasuredChildHeight=l));var k=r.children[0],T=this.getElementSize(k);this.minMeasuredChildWidth=Math.min(this.minMeasuredChildWidth,T.width),this.minMeasuredChildHeight=Math.min(this.minMeasuredChildHeight,T.height)}i=this.childWidth||this.minMeasuredChildWidth||s,n=this.childHeight||this.minMeasuredChildHeight||l;a=Math.max(Math.ceil(s/i),1),c=Math.max(Math.ceil(l/n),1);t=this.horizontal?a:c}var E=this.items.length,P=o*t,D=E/P,z=Math.ceil(E/o),O=0,A=this.horizontal?i:n;if(this.enableUnequalChildrenSizes){var L=0;for(v=0;v<z;++v){var W=this.wrapGroupDimensions.maxChildSizePerWrapGroup[v]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[v][this._childScrollDim];W?O+=W:++L}O+=Math.round(L*A)}else O=z*A;this.headerElementRef&&(O+=this.headerElementRef.nativeElement.clientHeight);var _=this.horizontal?s:l;return{itemCount:E,itemsPerWrapGroup:o,wrapGroupsPerPage:t,itemsPerPage:P,pageCount_fractional:D,childWidth:i,childHeight:n,scrollLength:O,viewportLength:_,maxScrollPosition:Math.max(O-_,0)}},e.prototype.calculatePadding=function(e,t){if(0===t.itemCount)return 0;var i=t[this._childScrollDim],n=Math.floor(e/t.itemsPerWrapGroup)||0;if(!this.enableUnequalChildrenSizes)return i*n;for(var s=0,l=0,r=0;r<n;++r){var o=this.wrapGroupDimensions.maxChildSizePerWrapGroup[r]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[r][this._childScrollDim];o?l+=o:++s}return l+=Math.round(s*i)},e.prototype.calculatePageInfo=function(e,t){var i=0;if(this.enableUnequalChildrenSizes)for(var n=Math.ceil(t.itemCount/t.itemsPerWrapGroup),s=0,l=t[this._childScrollDim],r=0;r<n;++r){var o=this.wrapGroupDimensions.maxChildSizePerWrapGroup[r]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[r][this._childScrollDim];if(e<(s+=o||l)){i=r/n;break}}else i=e/t.scrollLength;var a=Math.min(Math.max(i*t.pageCount_fractional,0),t.pageCount_fractional)*t.itemsPerPage,c=t.itemCount-t.itemsPerPage-1,h=Math.min(Math.floor(a),c);if(h-=h%t.itemsPerWrapGroup,this.stripedTable){var d=2*t.itemsPerWrapGroup;h%d!=0&&(h=Math.max(h-h%d,0))}var p=Math.ceil(a)+t.itemsPerPage-1,g=(p+1)%t.itemsPerWrapGroup;g>0&&(p+=t.itemsPerWrapGroup-g),isNaN(h)&&(h=0),isNaN(p)&&(p=0),h=Math.min(Math.max(h,0),t.itemCount-1),p=Math.min(Math.max(p,0),t.itemCount-1);var u=this.bufferAmount*t.itemsPerWrapGroup;return{startIndex:h,endIndex:p,startIndexWithBuffer:Math.min(Math.max(h-u,0),t.itemCount-1),endIndexWithBuffer:Math.min(Math.max(p+u,0),t.itemCount-1),scrollStartPosition:e,scrollEndPosition:e+t.viewportLength,maxScrollPosition:t.maxScrollPosition}},e.prototype.calculateViewport=function(){var e=this.calculateDimensions(),t=this.getElementsOffset(),i=this.getScrollStartPosition();i>e.scrollLength+t&&!(this.parentScroll instanceof Window)?i=e.scrollLength:i-=t,i=Math.max(0,i);var n=this.calculatePageInfo(i,e),s=this.calculatePadding(n.startIndexWithBuffer,e),l=e.scrollLength;return{startIndex:n.startIndex,endIndex:n.endIndex,startIndexWithBuffer:n.startIndexWithBuffer,endIndexWithBuffer:n.endIndexWithBuffer,padding:Math.round(s),scrollLength:Math.round(l),scrollStartPosition:n.scrollStartPosition,scrollEndPosition:n.scrollEndPosition,maxScrollPosition:n.maxScrollPosition}},e}();w.decorators=[{type:t.Component,args:[{selector:"virtual-scroller,[virtualScroller]",exportAs:"virtualScroller",template:'\n    <div class="total-padding" #invisiblePadding></div>\n    <div class="scrollable-content" #content>\n      <ng-content></ng-content>\n    </div>\n  ',host:{"[class.horizontal]":"horizontal","[class.vertical]":"!horizontal","[class.selfScroll]":"!parentScroll"},styles:["\n    :host {\n      position: relative;\n\t  display: block;\n      -webkit-overflow-scrolling: touch;\n    }\n\t\n\t:host.horizontal.selfScroll {\n      overflow-y: visible;\n      overflow-x: auto;\n\t}\n\t:host.vertical.selfScroll {\n      overflow-y: auto;\n      overflow-x: visible;\n\t}\n\t\n    .scrollable-content {\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      max-width: 100vw;\n      max-height: 100vh;\n      position: absolute;\n    }\n\n\t.scrollable-content ::ng-deep > * {\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t:host.horizontal {\n\t\twhite-space: nowrap;\n\t}\n\t\n\t:host.horizontal .scrollable-content {\n\t\tdisplay: flex;\n\t}\n\t\n\t:host.horizontal .scrollable-content ::ng-deep > * {\n\t\tflex-shrink: 0;\n\t\tflex-grow: 0;\n\t\twhite-space: initial;\n\t}\n\t\n    .total-padding {\n      width: 1px;\n      opacity: 0;\n    }\n    \n    :host.horizontal .total-padding {\n      height: 100%;\n    }\n  "]}]}],w.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:t.NgZone},{type:t.ChangeDetectorRef},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:["virtual-scroller-default-options"]}]}]},w.propDecorators={executeRefreshOutsideAngularZone:[{type:t.Input}],enableUnequalChildrenSizes:[{type:t.Input}],useMarginInsteadOfTranslate:[{type:t.Input}],modifyOverflowStyleOfParentScroll:[{type:t.Input}],stripedTable:[{type:t.Input}],scrollbarWidth:[{type:t.Input}],scrollbarHeight:[{type:t.Input}],childWidth:[{type:t.Input}],childHeight:[{type:t.Input}],ssrChildWidth:[{type:t.Input}],ssrChildHeight:[{type:t.Input}],ssrViewportWidth:[{type:t.Input}],ssrViewportHeight:[{type:t.Input}],bufferAmount:[{type:t.Input}],scrollAnimationTime:[{type:t.Input}],resizeBypassRefreshThreshold:[{type:t.Input}],scrollThrottlingTime:[{type:t.Input}],scrollDebounceTime:[{type:t.Input}],checkResizeInterval:[{type:t.Input}],items:[{type:t.Input}],compareItems:[{type:t.Input}],horizontal:[{type:t.Input}],parentScroll:[{type:t.Input}],vsUpdate:[{type:t.Output}],vsChange:[{type:t.Output}],vsStart:[{type:t.Output}],vsEnd:[{type:t.Output}],contentElementRef:[{type:t.ViewChild,args:["content",{read:t.ElementRef,static:!1}]}],invisiblePaddingElementRef:[{type:t.ViewChild,args:["invisiblePadding",{read:t.ElementRef,static:!1}]}],headerElementRef:[{type:t.ContentChild,args:["header",{read:t.ElementRef,static:!1}]}],containerElementRef:[{type:t.ContentChild,args:["container",{read:t.ElementRef,static:!1}]}]};var I=function(){};I.decorators=[{type:t.NgModule,args:[{exports:[w],declarations:[w],imports:[n.CommonModule],providers:[{provide:"virtual-scroller-default-options",useFactory:S}]}]}];var C={provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return E})),multi:!0},k={provide:i.NG_VALIDATORS,useExisting:t.forwardRef((function(){return E})),multi:!0},T=function(){},E=function(){function e(e,i,n){var l=this;this._elementRef=e,this.cdr=i,this.filterPipe=n,this.onSelect=new t.EventEmitter,this.onDeSelect=new t.EventEmitter,this.onSelectAll=new t.EventEmitter,this.onDeSelectAll=new t.EventEmitter,this.onOpen=new t.EventEmitter,this.onClose=new t.EventEmitter,this.onScrollToEnd=new t.EventEmitter,this.onFilterSelectAll=new t.EventEmitter,this.onFilterDeSelectAll=new t.EventEmitter,this.onAddFilterNewItem=new t.EventEmitter,this.onGroupSelect=new t.EventEmitter,this.onGroupDeSelect=new t.EventEmitter,this.virtualdata=[],this.searchTerm$=new s.Subject,this.isActive=!1,this.isSelectAll=!1,this.isFilterSelectAll=!1,this.isInfiniteFilterSelectAll=!1,this.chunkIndex=[],this.cachedItems=[],this.groupCachedItems=[],this.itemHeight=41.6,this.filterLength=0,this.infiniteFilterLength=0,this.dropdownListYOffset=0,this.dropDownWidth=0,this.dropDownTop="",this.dropDownBottom="unset",this.dropDownLeft=0,this.id=Math.random().toString(36).substring(2),this.defaultSettings={singleSelection:!1,text:"Select",enableCheckAll:!0,selectAllText:"Select All",unSelectAllText:"UnSelect All",filterSelectAllText:"Select all filtered results",filterUnSelectAllText:"UnSelect all filtered results",enableSearchFilter:!1,searchBy:[],maxHeight:300,badgeShowLimit:999999999999,classes:"",disabled:!1,searchPlaceholderText:"Search",showCheckbox:!0,noDataLabel:"No Data Available",searchAutofocus:!0,lazyLoading:!1,labelKey:"itemName",primaryKey:"id",position:"bottom",autoPosition:!0,enableFilterSelectAll:!0,selectGroup:!1,addNewItemOnFilter:!1,addNewButtonText:"Add",escapeToClose:!0,clearAll:!0,tagToBody:!0},this.randomSize=!0,this.filteredList=[],this.virtualScroollInit=!1,this.isDisabledItemPresent=!1,this.onTouchedCallback=T,this.onChangeCallback=T,this.searchTerm$.asObservable().pipe(r.debounceTime(1e3),r.distinctUntilChanged(),r.tap((function(e){return e}))).subscribe((function(e){l.filterInfiniteList(e)}))}return e.prototype.onEscapeDown=function(e){this.settings.escapeToClose&&this.closeDropdown()},e.prototype.onScroll=function(e){this.isActive&&this.settings.tagToBody&&this.closeDropdown()},e.prototype.ngOnInit=function(){var e=this;this.settings=Object.assign(this.defaultSettings,this.settings),this.cachedItems=this.cloneArray(this.data),"top"==this.settings.position&&setTimeout((function(){e.selectedListHeight={val:0},e.selectedListHeight.val=e.selectedListElem.nativeElement.clientHeight})),setTimeout((function(){e.calculateDropdownDirection()})),this.virtualScroollInit=!1},e.prototype.onKeyUp=function(e){this.searchTerm$.next(e.target.value)},e.prototype.ngOnChanges=function(e){e.data&&!e.data.firstChange&&(this.settings.groupBy&&(this.groupedData=this.transformData(this.data,this.settings.groupBy),0==this.data.length&&(this.selectedItems=[]),this.groupCachedItems=this.cloneArray(this.groupedData)),this.cachedItems=this.cloneArray(this.data)),e.settings&&!e.settings.firstChange&&(this.settings=Object.assign(this.defaultSettings,this.settings)),e.loading,this.settings.lazyLoading&&this.virtualScroollInit&&e.data&&(this.virtualdata=e.data.currentValue)},e.prototype.ngDoCheck=function(){this.selectedItems&&(0==this.selectedItems.length||0==this.data.length||this.selectedItems.length<this.data.length)&&(this.isSelectAll=!1)},e.prototype.ngAfterViewInit=function(){this.settings.lazyLoading},e.prototype.ngAfterViewChecked=function(){this.selectedListElem.nativeElement.clientHeight&&"top"==this.settings.position&&this.selectedListHeight&&(this.selectedListHeight.val=this.selectedListElem.nativeElement.clientHeight,this.cdr.detectChanges())},e.prototype.onItemClick=function(e,t,i){if(!e.disabled&&!this.settings.disabled){var n=this.isSelected(e),s=this.selectedItems.length<this.settings.limitSelection;n?(this.removeSelected(e),this.onDeSelect.emit(e)):this.settings.limitSelection?s&&(this.addSelected(e),this.onSelect.emit(e)):(this.addSelected(e),this.onSelect.emit(e)),(this.isSelectAll||this.data.length>this.selectedItems.length)&&(this.isSelectAll=!1),this.data.length==this.selectedItems.length&&(this.isSelectAll=!0),this.settings.groupBy&&this.updateGroupInfo(e)}},e.prototype.validate=function(e){return null},e.prototype.writeValue=function(e){if(null!=e&&""!==e)if(this.settings.singleSelection)if(this.settings.groupBy)this.groupedData=this.transformData(this.data,this.settings.groupBy),this.groupCachedItems=this.cloneArray(this.groupedData),this.selectedItems=[e[0]];else try{if(e.length>1)throw this.selectedItems=[e[0]],new c(404,{msg:"Single Selection Mode, Selected Items cannot have more than one item."});this.selectedItems=e}catch(e){console.error(e.body.msg)}else this.settings.limitSelection?this.selectedItems=e.slice(0,this.settings.limitSelection):this.selectedItems=e,this.selectedItems.length===this.data.length&&this.data.length>0&&(this.isSelectAll=!0),this.settings.groupBy&&(this.groupedData=this.transformData(this.data,this.settings.groupBy),this.groupCachedItems=this.cloneArray(this.groupedData));else this.selectedItems=[]},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},e.prototype.trackByFn=function(e,t){return t[this.settings.primaryKey]},e.prototype.isSelected=function(e){var t=this;if(e.disabled)return!1;var i=!1;return this.selectedItems&&this.selectedItems.forEach((function(n){e[t.settings.primaryKey]===n[t.settings.primaryKey]&&(i=!0)})),i},e.prototype.addSelected=function(e){e.disabled||(this.settings.singleSelection?(this.selectedItems=[],this.selectedItems.push(e),this.closeDropdown()):this.selectedItems.push(e),this.onChangeCallback(this.selectedItems),this.onTouchedCallback(this.selectedItems))},e.prototype.removeSelected=function(e){var t=this;this.selectedItems&&this.selectedItems.forEach((function(i){e[t.settings.primaryKey]===i[t.settings.primaryKey]&&t.selectedItems.splice(t.selectedItems.indexOf(i),1)})),this.onChangeCallback(this.selectedItems),this.onTouchedCallback(this.selectedItems)},e.prototype.toggleDropdown=function(e){this.settings.disabled||(this.isActive=!this.isActive,this.isActive?this.openDropdown():this.closeDropdown(),this.settings.lazyLoading&&(this.virtualdata=this.data,this.virtualScroollInit=!0),e.preventDefault())},e.prototype.openDropdown=function(){var e=this;this.settings.disabled||(this.isActive=!0,this.calculateDropdownDirection(),this.settings.searchAutofocus&&this.searchInput&&this.settings.enableSearchFilter&&!this.searchTempl&&setTimeout((function(){e.searchInput.nativeElement.focus()}),0),this.onOpen.emit(!0))},e.prototype.closeDropdown=function(){this.searchInput&&this.settings.lazyLoading&&(this.searchInput.nativeElement.value=""),this.searchInput&&(this.searchInput.nativeElement.value=""),this.filter="",this.isActive=!1,this.searchTerm$.next(""),this.onClose.emit(!1)},e.prototype.closeDropdownOnClickOut=function(){this.isActive&&(this.searchInput&&this.settings.lazyLoading&&(this.searchInput.nativeElement.value=""),this.searchInput&&(this.searchInput.nativeElement.value=""),this.filter="",this.isActive=!1,this.clearSearch(),this.searchTerm$.next(""),this.onClose.emit(!1))},e.prototype.toggleSelectAll=function(e){var t=this;this.isSelectAll?(this.settings.groupBy&&(this.groupedData.forEach((function(e){e.selected=!1})),this.groupCachedItems.forEach((function(e){e.selected=!1}))),this.selectedItems=[],this.isSelectAll=!1,this.onChangeCallback(this.selectedItems),this.onTouchedCallback(this.selectedItems),this.onDeSelectAll.emit(this.selectedItems)):(this.selectedItems=[],this.settings.groupBy&&(this.groupedData.forEach((function(e){e.selected=!e.disabled})),this.groupCachedItems.forEach((function(e){e.selected=!e.disabled}))),this.selectedItems=this.data.filter((function(e){return!e.disabled})),this.isSelectAll=!0,this.onChangeCallback(this.selectedItems),this.onTouchedCallback(this.selectedItems),this.onSelectAll.emit(this.selectedItems)),setTimeout((function(){t.calculateDropdownDirection()})),e.stopPropagation()},e.prototype.filterGroupedList=function(){var e=this;""!=this.filter&&null!=this.filter?(this.groupedData=this.cloneArray(this.groupCachedItems),this.groupedData=this.groupedData.filter((function(t){var i=[];return i=t[e.settings.labelKey].toLowerCase().indexOf(e.filter.toLowerCase())>-1?t.list:t.list.filter((function(t){return t[e.settings.labelKey].toLowerCase().indexOf(e.filter.toLowerCase())>-1})),t.list=i,t[e.settings.labelKey].toLowerCase().indexOf(e.filter.toLowerCase())>-1?i:i.some((function(t){return t[e.settings.labelKey].toLowerCase().indexOf(e.filter.toLowerCase())>-1}))}))):this.clearSearch()},e.prototype.toggleFilterSelectAll=function(){var e=this;if(this.isFilterSelectAll){var t=[];this.settings.groupBy?(this.groupedData.forEach((function(i){i.list&&i.list.forEach((function(i){e.isSelected(i)&&(e.removeSelected(i),t.push(i))})),e.updateGroupInfo(i)})),this.filteredList.forEach((function(i){e.isSelected(i)&&(e.removeSelected(i),t.push(i))}))):this.filteredList.forEach((function(i){e.isSelected(i)&&(e.removeSelected(i),t.push(i))})),this.isFilterSelectAll=!1,this.onFilterDeSelectAll.emit(t)}else{var i=[];this.settings.groupBy?(this.groupedData.forEach((function(t){t.sele,t.list&&t.list.forEach((function(t){e.isSelected(t)||(e.addSelected(t),i.push(t))})),e.updateGroupInfo(t)})),this.filteredList.forEach((function(t){e.isSelected(t)||t.hasOwnProperty("grpTitle")||(e.addSelected(t),i.push(t))}))):this.filteredList.forEach((function(t){e.isSelected(t)||(e.addSelected(t),i.push(t))})),this.isFilterSelectAll=!0,this.onFilterSelectAll.emit(i)}},e.prototype.toggleInfiniteFilterSelectAll=function(){var e=this;this.isInfiniteFilterSelectAll?(this.virtualdata.forEach((function(t){e.isSelected(t)&&e.removeSelected(t)})),this.isInfiniteFilterSelectAll=!1):(this.virtualdata.forEach((function(t){e.isSelected(t)||e.addSelected(t)})),this.isInfiniteFilterSelectAll=!0)},e.prototype.clearSearch=function(){this.settings.groupBy&&(this.groupedData=[],this.groupedData=this.cloneArray(this.groupCachedItems)),this.filter="",this.isFilterSelectAll=!1,this.searchTerm$.next(""),this.data=this.cachedItems},e.prototype.onFilterChange=function(e){var t=this;(this.filter&&""==this.filter||0==e.length)&&(this.isFilterSelectAll=!1,this.data=this.cachedItems.slice());var i=0;e.forEach((function(e){!e.hasOwnProperty("grpTitle")&&t.isSelected(e)&&i++})),i>0&&this.filterLength==i?this.isFilterSelectAll=!0:i>0&&this.filterLength!=i&&(this.isFilterSelectAll=!1),this.data=e},e.prototype.cloneArray=function(e){if(Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"==typeof e)throw"Cannot clone array containing an object!";return e},e.prototype.updateGroupInfo=function(e){var t=this;if(!e.disabled){var i=this.settings.groupBy;this.groupedData.forEach((function(n){var s=0;n.grpTitle&&e[i]==n[i]&&n.list&&n.list.forEach((function(e){t.isSelected(e)&&s++})),n.list&&s===n.list.length&&e[i]==n[i]?n.selected=!0:n.list&&s!=n.list.length&&e[i]==n[i]&&(n.selected=!1)})),this.groupCachedItems.forEach((function(n){var s=0;n.grpTitle&&e[i]==n[i]&&n.list&&n.list.forEach((function(e){t.isSelected(e)&&s++})),n.list&&s===n.list.length&&e[i]==n[i]?n.selected=!0:n.list&&s!=n.list.length&&e[i]==n[i]&&(n.selected=!1)}))}},e.prototype.transformData=function(e,t){var i=this,n=e.reduce((function(e,i){return e[i[t]]?e[i[t]].push(i):e[i[t]]=[i],e}),{}),s=[];return Object.keys(n).map((function(e){var t={},l=[];t.grpTitle=!0,t[i.settings.labelKey]=e,t[i.settings.groupBy]=e,t.selected=!1,t.list=[];var r=0;n[e].forEach((function(e){e.list=[],e.disabled&&(i.isDisabledItemPresent=!0,l.push(e)),t.list.push(e),i.isSelected(e)&&r++})),r==t.list.length?t.selected=!0:t.selected=!1,t.disabled=l.length===n[e].length,s.push(t)})),s},e.prototype.filterInfiniteList=function(e){var t=this,i=[];if(this.settings.groupBy?this.groupedData=this.groupCachedItems.slice():(this.data=this.cachedItems.slice(),this.virtualdata=this.cachedItems.slice()),(null!=e||""!=e)&&!this.settings.groupBy){if(this.settings.searchBy.length>0)for(var n=function(n){s.virtualdata.filter((function(s){s[t.settings.searchBy[n].toString()].toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0&&i.push(s)}))},s=this,l=0;l<this.settings.searchBy.length;l++)n(l);else this.virtualdata.filter((function(t){for(var n in t)if(t[n].toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0){i.push(t);break}}));this.virtualdata=[],this.virtualdata=i,this.infiniteFilterLength=this.virtualdata.length}""!=e.toString()&&this.settings.groupBy?(this.groupedData.filter((function(t){if(t.hasOwnProperty("grpTitle"))i.push(t);else for(var n in t)if(t[n].toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0){i.push(t);break}})),this.groupedData=[],this.groupedData=i,this.infiniteFilterLength=this.groupedData.length):""==e.toString()&&this.cachedItems.length>0&&(this.virtualdata=[],this.virtualdata=this.cachedItems,this.infiniteFilterLength=0),this.virtualScroller&&this.virtualScroller.refresh()},e.prototype.resetInfiniteSearch=function(){this.filter="",this.isInfiniteFilterSelectAll=!1,this.virtualdata=[],this.virtualdata=this.cachedItems,this.groupedData=this.groupCachedItems,this.searchTerm$.next(""),this.infiniteFilterLength=0},e.prototype.onScrollEnd=function(e){e.endIndex===this.data.length-1||e.startIndex,this.onScrollToEnd.emit(e)},e.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.selectGroup=function(e){var t=this;e.disabled||(e.selected?(e.selected=!1,e.list.forEach((function(e){t.removeSelected(e)})),this.onGroupDeSelect.emit(e),this.updateGroupInfo(e)):(e.selected=!0,e.list.forEach((function(e){t.isSelected(e)||t.addSelected(e)})),this.onGroupSelect.emit(e),this.updateGroupInfo(e)))},e.prototype.addFilterNewItem=function(){this.onAddFilterNewItem.emit(this.filter),this.filterPipe.transform(this.data,this.filter,this.settings.searchBy)},e.prototype.calculateDropdownDirection=function(){this.settings.position;var e=this.cuppaDropdown.nativeElement,t=e.clientWidth;if(this.dropDownWidth=t,this.dropDownLeft=this.settings.tagToBody?e.getBoundingClientRect().x:"unset","top"!=this.settings.position||this.settings.autoPosition?"bottom"!=this.settings.position||this.settings.autoPosition||this.openTowardsTop(!1):this.openTowardsTop(!0),this.settings.autoPosition){var i=this.defaultSettings.maxHeight,n=document.documentElement.clientHeight,s=this.selectedListElem.nativeElement.getBoundingClientRect(),l=s.top;n-s.top<l&&i<l?this.openTowardsTop(!0):this.openTowardsTop(!1)}},e.prototype.openTowardsTop=function(e){var t=this.cuppaDropdown.nativeElement;e&&this.selectedListElem.nativeElement.clientHeight?(this.dropdownListYOffset=15-this.selectedListElem.nativeElement.clientHeight,this.settings.tagToBody?this.dropDownTop=t.getBoundingClientRect().y-2*this.selectedListElem.nativeElement.clientHeight-15-this.defaultSettings.maxHeight+"px":this.dropDownBottom=this.selectedListElem.nativeElement.clientHeight+15+"px",this.settings.position="top"):(this.settings.tagToBody?this.dropDownTop=t.getBoundingClientRect().y+t.clientHeight+1+"px":(this.dropDownTop="unset",this.dropDownBottom="unset"),this.dropdownListYOffset=0,this.settings.position="bottom")},e.prototype.clearSelection=function(e){this.settings.groupBy&&this.groupCachedItems.forEach((function(e){e.selected=!1})),this.clearSearch(),this.selectedItems=[],this.isSelectAll=!1,this.onChangeCallback(this.selectedItems),this.onTouchedCallback(this.selectedItems),this.onDeSelectAll.emit(this.selectedItems)},e.prototype.filteritems=function(e){var t=this;if(this.filteredList=this.filterPipe.transform(this.cachedItems,e.target.value,this.settings.searchBy),this.filteredList){var i=0;this.filteredList.forEach((function(e,n){e.disabled&&(t.isDisabledItemPresent=!0),e.hasOwnProperty("grpTitle")||i++})),this.filterLength=i}this.onFilterChange(this.filteredList)},e}();E.decorators=[{type:t.Component,args:[{selector:"angular2-multiselect",template:'<div class="cuppa-dropdown" (clickOutside)="closeDropdownOnClickOut()" #cuppaDropdown>\n    <div class="selected-list" #selectedList>\n        <div class="c-btn" (click)="toggleDropdown($event)" [ngClass]="{\'disabled\': settings.disabled}" [attr.tabindex]="0">\n\n            <span *ngIf="selectedItems?.length == 0">{{settings.text}}</span>\n            <span *ngIf="settings.singleSelection && !badgeTempl">\n                <span *ngFor="let item of selectedItems;trackBy: trackByFn.bind(this);let k = index">\n                    {{item[settings.labelKey]}}\n                </span>\n            </span>\n            <span class="c-list" *ngIf="selectedItems?.length > 0 && settings.singleSelection && badgeTempl ">\n                <div class="c-token" *ngFor="let item of selectedItems;trackBy: trackByFn.bind(this);let k = index">\n                    <span *ngIf="!badgeTempl" class="c-label">{{item[settings.labelKey]}}</span>\n\n                    <span *ngIf="badgeTempl" class="c-label">\n                        <c-templateRenderer [data]="badgeTempl" [item]="item"></c-templateRenderer>\n                    </span>\n                    <span class="c-remove" (click)="onItemClick(item,k,$event);$event.stopPropagation()">\n                        <c-icon [name]="\'remove\'"></c-icon>\n                    </span>\n                </div>\n            </span>\n            <div class="c-list" *ngIf="selectedItems?.length > 0 && !settings.singleSelection">\n                <div class="c-token" *ngFor="let item of selectedItems;trackBy: trackByFn.bind(this);let k = index" [hidden]="k > settings.badgeShowLimit-1">\n                    <span *ngIf="!badgeTempl" class="c-label">{{item[settings.labelKey]}}</span>\n                    <span *ngIf="badgeTempl" class="c-label">\n                        <c-templateRenderer [data]="badgeTempl" [item]="item"></c-templateRenderer>\n                    </span>\n                    <span class="c-remove" (click)="onItemClick(item,k,$event);$event.stopPropagation()">\n                        <c-icon [name]="\'remove\'"></c-icon>\n                    </span>\n                </div>\n            </div>\n            <span class="countplaceholder" *ngIf="selectedItems?.length > settings.badgeShowLimit">+{{selectedItems?.length - settings.badgeShowLimit }}</span>\n            <span class="c-remove clear-all" *ngIf="settings.clearAll && selectedItems?.length > 0 && !settings.disabled" (click)="clearSelection($event);$event.stopPropagation()">\n                <c-icon [name]="\'remove\'"></c-icon>\n            </span>\n            <span *ngIf="!isActive" class="c-angle-down">\n                <c-icon [name]="\'angle-down\'"></c-icon>\n            </span>\n            <span *ngIf="isActive" class="c-angle-up">\n                <c-icon [name]="\'angle-up\'"></c-icon>\n\n            </span>\n        </div>\n    </div>\n    <div #dropdownList class="dropdown-list animated fadeIn" \n    [ngClass]="{\'tagToBody\': settings.tagToBody}"\n    [style.width.px]="dropDownWidth" \n    [style.top]="dropDownTop" \n    [style.bottom]="dropDownBottom"\n    [style.left.px]="dropDownLeft" \n        [hidden]="!isActive">\n        <div [ngClass]="{\'arrow-up\': settings.position == \'bottom\', \'arrow-down\': settings.position == \'top\'}" class="arrow-2"></div>\n        <div [ngClass]="{\'arrow-up\': settings.position == \'bottom\', \'arrow-down\': settings.position == \'top\'}"></div>\n        <div class="list-area" [ngClass]="{\'single-select-mode\': settings.singleSelection }">\n            <div class="pure-checkbox select-all" *ngIf="settings.enableCheckAll && !settings.singleSelection && !settings.limitSelection && data?.length > 0 && !isDisabledItemPresent"\n                >\n                <input *ngIf="settings.showCheckbox" type="checkbox" [checked]="isSelectAll" [disabled]="settings.limitSelection == selectedItems?.length"\n                [id]="id" (change)="toggleSelectAll($event)"/>\n                <label [for]="id">\n                    <span [hidden]="isSelectAll">{{settings.selectAllText}}</span>\n                    <span [hidden]="!isSelectAll">{{settings.unSelectAllText}}</span>\n                </label>\n            </div>\n            <img class="loading-icon" *ngIf="loading" src="assets/img/loading.gif" />\n            <div class="list-filter" *ngIf="settings.enableSearchFilter">\n                <span class="c-search" id="searchIcon">\n                    <c-icon [name]="\'search\'"></c-icon>\n                </span>\n                <span *ngIf="!settings.lazyLoading" [hidden]="filter == undefined || filter?.length == 0" class="c-clear" (click)="clearSearch()">\n                    <c-icon [name]="\'clear\'"></c-icon>\n                </span>\n                <span *ngIf="settings.lazyLoading" [hidden]="filter == undefined || filter?.length == 0" class="c-clear" (click)="resetInfiniteSearch()">\n                    <c-icon [name]="\'clear\'"></c-icon>\n                </span>\n\n                <input class="c-input" *ngIf="settings.groupBy && !settings.lazyLoading && !searchTempl" #searchInput type="text" [placeholder]="settings.searchPlaceholderText"\n                    [(ngModel)]="filter" (keyup)="filterGroupedList()" aria-labelledby="searchIcon">\n                <input class="c-input" *ngIf="!settings.groupBy && !settings.lazyLoading && !searchTempl" #searchInput type="text" [placeholder]="settings.searchPlaceholderText"\n                    [(ngModel)]="filter" (keyup)="filteritems($event)" aria-labelledby="searchIcon">\n                <input class="c-input" *ngIf="settings.lazyLoading && !searchTempl" #searchInput type="text" [placeholder]="settings.searchPlaceholderText"\n                    [(ngModel)]="filter" (keyup)="onKeyUp($event)" aria-labelledby="searchIcon">\n                \x3c!--            <input class="c-input" *ngIf="!settings.lazyLoading && !searchTempl && settings.groupBy" #searchInput type="text" [placeholder]="settings.searchPlaceholderText"\n                [(ngModel)]="filter" (keyup)="filterGroupList($event)">--\x3e\n                <c-templateRenderer *ngIf="searchTempl" [data]="searchTempl" [item]="item"></c-templateRenderer>\n            </div>\n            <div class="filter-select-all" *ngIf="!settings.lazyLoading && settings.enableFilterSelectAll && !isDisabledItemPresent">\n                <div class="pure-checkbox select-all" *ngIf="!settings.groupBy && filter?.length > 0 && filterLength > 0  && !settings.singleSelection" (click)="toggleFilterSelectAll()">\n                    <input type="checkbox" [checked]="isFilterSelectAll" [disabled]="settings.limitSelection == selectedItems?.length" aria-labelledby="optionName"\n                    aria-label="option"/>\n                    <label>\n                        <span [hidden]="isFilterSelectAll">{{settings.filterSelectAllText}}</span>\n                        <span [hidden]="!isFilterSelectAll">{{settings.filterUnSelectAllText}}</span>\n                    </label>\n                </div>\n                <div class="pure-checkbox select-all" *ngIf="settings.groupBy && filter?.length > 0 && groupedData?.length > 0  && !settings.singleSelection" (click)="toggleFilterSelectAll()">\n                    <input type="checkbox" [checked]="isFilterSelectAll && filter?.length > 0" [disabled]="settings.limitSelection == selectedItems?.length"\n                    aria-labelledby="option"/>\n                    <label>\n                        <span [hidden]="isFilterSelectAll">{{settings.filterSelectAllText}}</span>\n                        <span [hidden]="!isFilterSelectAll">{{settings.filterUnSelectAllText}}</span>\n                    </label>\n                </div>\n            </div>\n            <div class="filter-select-all" *ngIf="settings.lazyLoading && settings.enableFilterSelectAll && !isDisabledItemPresent && !settings.singleSelection">\n                <div class="pure-checkbox select-all" *ngIf="filter?.length > 0 && infiniteFilterLength > 0" (click)="toggleInfiniteFilterSelectAll()">\n                    <input type="checkbox" [checked]="isInfiniteFilterSelectAll" [disabled]="settings.limitSelection == selectedItems?.length"\n                    aria-labelledby="option"/>\n                    <label>\n                        <span [hidden]="isInfiniteFilterSelectAll">{{settings.filterSelectAllText}}</span>\n                        <span [hidden]="!isInfiniteFilterSelectAll">{{settings.filterUnSelectAllText}}</span>\n                    </label>\n                </div>\n            </div>\n            <div class="filter-select-all" *ngIf="filter?.length">\n                <div class="btn-container" *ngIf="settings.addNewItemOnFilter">\n                    <button class="c-btn btn-iceblue" (click)="addFilterNewItem()">{{settings.addNewButtonText}}</button>\n                </div>\n            </div>\n\n            <div *ngIf="!settings.groupBy && !settings.lazyLoading && itemTempl == undefined" [style.maxHeight]="settings.maxHeight+\'px\'"\n                style="overflow: auto;">\n                <ul class="lazyContainer">\n                    <li *ngFor="let item of data; let i = index;" (click)="onItemClick(item,i,$event)"\n                        class="pure-checkbox" [ngClass]="{\'selected-item\': isSelected(item) == true }">\n                        <input *ngIf="settings.showCheckbox" type="checkbox" [checked]="isSelected(item)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                        aria-labelledby="option"/>\n                        <label>{{item[settings.labelKey]}}</label>\n                    </li>\n                </ul>\n            </div>\n            \x3c!-- lazy loading --\x3e\n            <div *ngIf="!settings.groupBy && settings.lazyLoading && itemTempl == undefined" [style.maxHeight]="settings.maxHeight+\'px\'"\n                style="overflow: auto;">\n                <ul virtualScroller #scroll [enableUnequalChildrenSizes]="randomSize" [items]="virtualdata" (vsStart)="onScrollEnd($event)"\n                    (vsEnd)="onScrollEnd($event)" [ngStyle]="{\'height\': settings.maxHeight+\'px\'}" class="lazyContainer">\n                    <li *ngFor="let item of scroll.viewPortItems; let i = index;" (click)="onItemClick(item,i,$event)" class="pure-checkbox"\n                        [ngClass]="{\'selected-item\': isSelected(item) == true }">\n                        <input *ngIf="settings.showCheckbox" type="checkbox" [checked]="isSelected(item)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                        />\n                        <label>{{item[settings.labelKey]}}</label>\n                    </li>\n                </ul>\n            </div>\n            \x3c!-- custom template --\x3e\n            <div *ngIf="!settings.groupBy && !settings.lazyLoading && itemTempl != undefined" [style.maxHeight]="settings.maxHeight+\'px\'"\n                style="overflow: auto;">\n                <ul class="lazyContainer">\n                    <li *ngFor="let item of data; let i = index;" (click)="onItemClick(item,i,$event)"\n                        class="pure-checkbox" [ngClass]="{\'selected-item\': isSelected(item) == true }">\n                        <input *ngIf="settings.showCheckbox" type="checkbox" [checked]="isSelected(item)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                        />\n                        <label></label>\n                        <c-templateRenderer [data]="itemTempl" [item]="item"></c-templateRenderer>\n                    </li>\n                </ul>\n            </div>\n            \x3c!-- lazy loading and custom template --\x3e\n            <div *ngIf="!settings.groupBy && settings.lazyLoading && itemTempl != undefined" [style.maxHeight]="settings.maxHeight+\'px\'"\n                style="overflow: auto;">\n                <ul virtualScroller #scroll2 [enableUnequalChildrenSizes]="randomSize" [items]="virtualdata" (vsStart)="onScrollEnd($event)"\n                    (vsEnd)="onScrollEnd($event)" class="lazyContainer" [ngStyle]="{\'height\': settings.maxHeight+\'px\'}">\n                    <li *ngFor="let item of scroll2.viewPortItems; let i = index;" (click)="onItemClick(item,i,$event)" class="pure-checkbox"\n                        [ngClass]="{\'selected-item\': isSelected(item) == true }">\n                        <input *ngIf="settings.showCheckbox" type="checkbox" [checked]="isSelected(item)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                        />\n                        <label></label>\n                        <c-templateRenderer [data]="itemTempl" [item]="item"></c-templateRenderer>\n                    </li>\n                </ul>\n            </div>\n            \x3c!-- lazy loading, group By and custom template --\x3e\n            <div *ngIf="settings.groupBy && settings.lazyLoading && itemTempl != undefined" [style.maxHeight]="settings.maxHeight+\'px\'"\n                style="overflow: auto;">\n                <ul virtualScroller #scroll3 [enableUnequalChildrenSizes]="randomSize" [items]="virtualdata" (vsStart)="onScrollEnd($event)"\n                    (vsEnd)="onScrollEnd($event)" [ngStyle]="{\'height\': settings.maxHeight+\'px\'}" class="lazyContainer">\n                    <span *ngFor="let item of scroll3.viewPortItems; let i = index;">\n                        <li (click)="onItemClick(item,i,$event)" *ngIf="!item.grpTitle" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle && !settings.singleSelection}"\n                            class="pure-checkbox">\n                            <input *ngIf="settings.showCheckbox && !settings.singleSelection" type="checkbox" [checked]="isSelected(item)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                            />\n                            <label></label>\n                            <c-templateRenderer [data]="itemTempl" [item]="item"></c-templateRenderer>\n                        </li>\n                        <li *ngIf="item.grpTitle" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle && !settings.singleSelection}"\n                            class="pure-checkbox">\n                            <input *ngIf="settings.showCheckbox" type="checkbox" [checked]="isSelected(item)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                            />\n                            <label></label>\n                            <c-templateRenderer [data]="itemTempl" [item]="item"></c-templateRenderer>\n                        </li>\n                    </span>\n                </ul>\n            </div>\n            \x3c!-- group By and custom template --\x3e\n            <div *ngIf="settings.groupBy && !settings.lazyLoading && itemTempl != undefined" [style.maxHeight]="settings.maxHeight+\'px\'"\n                style="overflow: auto;">\n                <ul class="lazyContainer">\n                    <span *ngFor="let item of groupedData; let i = index;">\n                        <li (click)="selectGroup(item)" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle && !settings.singleSelection}"\n                            class="pure-checkbox">\n                            <input *ngIf="settings.showCheckbox && !settings.singleSelection" type="checkbox" [checked]="item.selected" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                            />\n                            <label>{{item[settings.labelKey]}}</label>\n                            <ul class="lazyContainer">\n                                <span *ngFor="let val of item.list ; let j = index;">\n                                    <li (click)="onItemClick(val,j,$event); $event.stopPropagation()" [ngClass]="{\'grp-title\': val.grpTitle,\'grp-item\': !val.grpTitle && !settings.singleSelection}"\n                                        class="pure-checkbox">\n                                        <input *ngIf="settings.showCheckbox" type="checkbox" [checked]="isSelected(val)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(val)) || val.disabled"\n                                        />\n                                        <label></label>\n                                        <c-templateRenderer [data]="itemTempl" [item]="val"></c-templateRenderer>\n                                    </li>\n                                </span>\n                            </ul>\n\n                        </li>\n                    </span>\n                </ul>\n            </div>\n            \x3c!-- lazy loading, group By --\x3e\n            <div *ngIf="settings.groupBy && settings.lazyLoading && itemTempl == undefined" [style.maxHeight]="settings.maxHeight+\'px\'"\n                style="overflow: auto;">\n                <virtual-scroller [items]="groupedData" (vsUpdate)="viewPortItems = $event" (vsEnd)="onScrollEnd($event)" [ngStyle]="{\'height\': settings.maxHeight+\'px\'}">\n                    <ul virtualScroller #scroll4 [enableUnequalChildrenSizes]="randomSize" [items]="virtualdata" (vsStart)="onScrollEnd($event)"\n                        (vsEnd)="onScrollEnd($event)" [ngStyle]="{\'height\': settings.maxHeight+\'px\'}" class="lazyContainer">\n                        <span *ngFor="let item of scroll4.viewPortItems; let i = index;">\n                            <li *ngIf="item.grpTitle" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle && !settings.singleSelection, \'selected-item\': isSelected(item) == true }"\n                                class="pure-checkbox">\n                                <input *ngIf="settings.showCheckbox && !item.grpTitle && !settings.singleSelection" type="checkbox" [checked]="isSelected(item)"\n                                    [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                                />\n                                <label>{{item[settings.labelKey]}}</label>\n                            </li>\n                            <li (click)="onItemClick(item,i,$event)" *ngIf="!item.grpTitle" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle && !settings.singleSelection, \'selected-item\': isSelected(item) == true }"\n                                class="pure-checkbox">\n                                <input *ngIf="settings.showCheckbox && !item.grpTitle" type="checkbox" [checked]="isSelected(item)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                                />\n                                <label>{{item[settings.labelKey]}}</label>\n                            </li>\n                        </span>\n                    </ul>\n                </virtual-scroller>\n            </div>\n            \x3c!-- group By --\x3e\n            <div *ngIf="settings.groupBy && !settings.lazyLoading && itemTempl == undefined" [style.maxHeight]="settings.maxHeight+\'px\'"\n                style="overflow: auto;">\n                <ul class="lazyContainer">\n                    <span *ngFor="let item of groupedData ; let i = index;">\n                        <li (click)="selectGroup(item)" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle && !settings.singleSelection}"\n                            class="pure-checkbox">\n                            <input *ngIf="settings.showCheckbox && !settings.singleSelection" type="checkbox" [checked]="item.selected" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(item)) || item.disabled"\n                            />\n                            <label>{{item[settings.labelKey]}}</label>\n                            <ul class="lazyContainer">\n                                <span *ngFor="let val of item.list ; let j = index;">\n                                    <li (click)="onItemClick(val,j,$event); $event.stopPropagation()" [ngClass]="{\'selected-item\': isSelected(val) == true,\'grp-title\': val.grpTitle,\'grp-item\': !val.grpTitle && !settings.singleSelection}"\n                                        class="pure-checkbox">\n                                        <input *ngIf="settings.showCheckbox" type="checkbox" [checked]="isSelected(val)" [disabled]="(settings.limitSelection == selectedItems?.length && !isSelected(val)) || val.disabled"\n                                        />\n                                        <label>{{val[settings.labelKey]}}</label>\n                                    </li>\n                                </span>\n                            </ul>\n                        </li>\n                    </span>\n                    \x3c!-- <span *ngFor="let item of groupedData ; let i = index;">\n                    <li (click)="onItemClick(item,i,$event)" *ngIf="!item.grpTitle" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle}" class="pure-checkbox">\n                    <input *ngIf="settings.showCheckbox && !item.grpTitle" type="checkbox" [checked]="isSelected(item)" [disabled]="settings.limitSelection == selectedItems?.length && !isSelected(item)"\n                    />\n                    <label>{{item[settings.labelKey]}}</label>\n                </li>\n                <li *ngIf="item.grpTitle && !settings.selectGroup" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle}" class="pure-checkbox">\n                    <input *ngIf="settings.showCheckbox && settings.selectGroup" type="checkbox" [checked]="isSelected(item)" [disabled]="settings.limitSelection == selectedItems?.length && !isSelected(item)"\n                    />\n                    <label>{{item[settings.labelKey]}}</label>\n                </li>\n                 <li  (click)="selectGroup(item)" *ngIf="item.grpTitle && settings.selectGroup" [ngClass]="{\'grp-title\': item.grpTitle,\'grp-item\': !item.grpTitle}" class="pure-checkbox">\n                    <input *ngIf="settings.showCheckbox && settings.selectGroup" type="checkbox" [checked]="item.selected" [disabled]="settings.limitSelection == selectedItems?.length && !isSelected(item)"\n                    />\n                    <label>{{item[settings.labelKey]}}</label>\n                </li>\n                </span> --\x3e\n                </ul>\n            </div>\n            <h5 class="list-message" *ngIf="data?.length == 0">{{settings.noDataLabel}}</h5>\n        </div>\n    </div>\n</div>',host:{"[class]":"defaultSettings.classes"},providers:[C,k],encapsulation:t.ViewEncapsulation.None,styles:['virtual-scroll{display:block;width:100%}.cuppa-dropdown{position:relative}.c-btn{display:inline-block;border-width:1px;line-height:1.25;border-radius:3px;font-size:.85rem;padding:5px 10px;cursor:pointer;align-items:center;min-height:38px}.c-btn.disabled{background:#ccc}.selected-list .c-list{float:left;padding:0;margin:0;width:calc(100% - 20px)}.selected-list .c-list .c-token{list-style:none;border-radius:2px;margin-right:4px;margin-top:2px;float:left;position:relative;padding:4px 22px 4px 8px}.selected-list .c-list .c-token .c-label{display:block;float:left}.selected-list .c-list .c-token .c-remove{position:absolute;right:8px;top:50%;transform:translateY(-50%);width:8px}.selected-list .c-list .c-token .c-remove svg{fill:#fff}.selected-list .fa-angle-down,.selected-list .fa-angle-up{font-size:15pt;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.selected-list .c-angle-down,.selected-list .c-angle-up{width:12px;height:12px;position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}.selected-list .c-angle-down svg,.selected-list .c-angle-up svg{fill:#333}.selected-list .countplaceholder{position:absolute;right:45px;top:50%;transform:translateY(-50%)}.selected-list .c-btn{width:100%;padding:5px 10px;cursor:pointer;display:flex;position:relative}.selected-list .c-btn .c-icon{position:absolute;right:5px;top:50%;transform:translateY(-50%)}.dropdown-list.tagToBody{position:fixed}.dropdown-list{position:absolute;padding-top:14px;width:100%;z-index:99999}.dropdown-list ul{padding:0;list-style:none;overflow:auto;margin:0}.dropdown-list ul li{padding:10px;cursor:pointer;text-align:left}.dropdown-list ul li:first-child{padding-top:10px}.dropdown-list ul li:last-child{padding-bottom:10px}.dropdown-list ::-webkit-scrollbar{width:8px}.dropdown-list ::-webkit-scrollbar-thumb{background:#ccc;border-radius:5px}.dropdown-list ::-webkit-scrollbar-track{background:#f2f2f2}.arrow-down,.arrow-up{width:0;height:0;border-left:13px solid transparent;border-right:13px solid transparent;border-bottom:15px solid #fff;margin-left:15px;position:absolute;top:0}.arrow-down{bottom:-14px;top:unset;transform:rotate(180deg)}.arrow-2{border-bottom:15px solid #ccc;top:-1px}.arrow-down.arrow-2{top:unset;bottom:-16px}.list-area{border:1px solid #ccc;border-radius:3px;background:#fff;margin:0}.select-all{padding:10px;text-align:left}.list-filter,.select-all{border-bottom:1px solid #ccc}.list-filter{position:relative;padding-left:35px;height:35px}.list-filter input{border:0;width:100%;height:100%;padding:0}.list-filter input:focus{outline:none}.list-filter .c-search{position:absolute;top:4px;left:10px;width:15px;height:15px}.list-filter .c-search svg{fill:#888}.list-filter .c-clear{position:absolute;top:4px;right:10px;width:15px;height:15px}.list-filter .c-clear svg{fill:#888}.pure-checkbox input[type=checkbox]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.pure-checkbox input[type=checkbox]:focus+label:before,.pure-checkbox input[type=checkbox]:hover+label:before{background-color:none}.pure-checkbox input[type=checkbox]:active+label:before{transition-duration:0s}.pure-checkbox input[type=checkbox]:disabled+label{color:#ccc}.pure-checkbox input[type=checkbox]+label{position:relative;padding-left:2em;vertical-align:middle;-webkit-user-select:none;user-select:none;cursor:pointer;margin:0;font-weight:300}.pure-checkbox input[type=checkbox]+label:before{box-sizing:initial;content:"";position:absolute;top:50%;left:0;width:15px;height:15px;margin-top:-9px;text-align:center;transition:all .4s ease;border-radius:3px}.pure-checkbox input[type=checkbox]+label:after{box-sizing:initial;content:"";position:absolute;left:0;width:15px;height:15px;margin-top:-9px;transform:scale(0);transform-origin:50%;transition:transform .2s ease-out}.pure-checkbox input[type=checkbox]:disabled+label:before{border-color:#ccc}.pure-checkbox input[type=checkbox]:disabled:focus+label:before .pure-checkbox input[type=checkbox]:disabled:hover+label:before{background-color:inherit}.pure-checkbox input[type=checkbox]:disabled:checked+label:before{background-color:#ccc}.pure-checkbox input[type=checkbox]+label:after{background-color:initial;top:50%;left:3px;width:9px;height:4px;margin-top:-5px;border-style:solid;border-width:0 0 2px 2px;border-image:none;transform:rotate(-45deg) scale(0)}.pure-checkbox input[type=checkbox]:checked+label:after{content:"";transition:transform .2s ease-out}.pure-checkbox input[type=radio]:checked+label:before{background-color:#fff}.pure-checkbox input[type=radio]:checked+label:after{transform:scale(1)}.pure-checkbox input[type=radio]+label:before{border-radius:50%}.pure-checkbox input[type=checkbox]:checked+label:after{transform:rotate(-45deg) scale(1)}.list-message{text-align:center;margin:0;padding:15px 0;font-size:medium}.list-grp{padding:0 15px!important}.list-grp h4{text-transform:capitalize;margin:15px 0 0;font-size:14px;font-weight:700}.list-grp>li{padding-left:15px!important}.grp-item{padding-left:30px!important}.grp-title{padding-bottom:0!important}.grp-title label{margin-bottom:0!important;font-weight:800;text-transform:capitalize}.grp-title:hover{background:none!important}.loading-icon{width:20px;position:absolute;right:10px;top:23px;z-index:1}.nodata-label{width:100%;text-align:center;padding:10px 0 0}.btn-container{text-align:center;padding:5px}.clear-all{width:8px;position:absolute;top:50%;right:30px;transform:translateY(-50%)}']}]}],E.ctorParameters=function(){return[{type:t.ElementRef},{type:t.ChangeDetectorRef},{type:m}]},E.propDecorators={data:[{type:t.Input}],settings:[{type:t.Input}],loading:[{type:t.Input}],onSelect:[{type:t.Output,args:["onSelect"]}],onDeSelect:[{type:t.Output,args:["onDeSelect"]}],onSelectAll:[{type:t.Output,args:["onSelectAll"]}],onDeSelectAll:[{type:t.Output,args:["onDeSelectAll"]}],onOpen:[{type:t.Output,args:["onOpen"]}],onClose:[{type:t.Output,args:["onClose"]}],onScrollToEnd:[{type:t.Output,args:["onScrollToEnd"]}],onFilterSelectAll:[{type:t.Output,args:["onFilterSelectAll"]}],onFilterDeSelectAll:[{type:t.Output,args:["onFilterDeSelectAll"]}],onAddFilterNewItem:[{type:t.Output,args:["onAddFilterNewItem"]}],onGroupSelect:[{type:t.Output,args:["onGroupSelect"]}],onGroupDeSelect:[{type:t.Output,args:["onGroupDeSelect"]}],itemTempl:[{type:t.ContentChild,args:[f,{static:!1}]}],badgeTempl:[{type:t.ContentChild,args:[v,{static:!1}]}],searchTempl:[{type:t.ContentChild,args:[b,{static:!1}]}],searchInput:[{type:t.ViewChild,args:["searchInput",{static:!1}]}],selectedListElem:[{type:t.ViewChild,args:["selectedList",{static:!1}]}],dropdownListElem:[{type:t.ViewChild,args:["dropdownList",{static:!1}]}],cuppaDropdown:[{type:t.ViewChild,args:["cuppaDropdown",{static:!1}]}],onEscapeDown:[{type:t.HostListener,args:["document:keyup.escape",["$event"]]}],onScroll:[{type:t.HostListener,args:["window:scroll",["$event"]]}],virtualScroller:[{type:t.ViewChild,args:[w,{static:!1}]}]};var P=function(){};P.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,i.FormsModule,I],declarations:[E,h,d,p,m,f,y,v,b,g,x],exports:[E,h,d,p,m,f,y,v,b,g,x],providers:[u,m]}]}],e.AngularMultiSelect=E,e.AngularMultiSelectModule=P,e.ClickOutsideDirective=h,e.Item=f,e.ListFilterPipe=m,e.TemplateRenderer=y,e.ɵa=C,e.ɵb=k,e.ɵc=d,e.ɵd=p,e.ɵe=g,e.ɵf=v,e.ɵg=b,e.ɵh=x,e.ɵi=S,e.ɵj=w,e.ɵk=I,e.ɵm=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular2-multiselect-dropdown.umd.min.js.map