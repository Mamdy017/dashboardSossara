!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-slimscroll",["exports","@angular/core","@angular/common","rxjs","rxjs/operators"],e):e((t=t||self)["ngx-slimscroll"]={},t.ng.core,t.ng.common,t.rxjs,t.rxjs.operators)}(this,(function(t,e,r,i,s){"use strict";var o=function(t){this.type=t.type,this.y=t&&t.y?t.y:0,this.percent=t&&t.percent?t.percent:0,this.duration=t&&t.duration?t.duration:0,this.easing=t&&t.easing?t.easing:"linear"},n=new e.InjectionToken("NGX_SLIMSCROLL_DEFAULTS"),a=function(){function t(t){this.position=t&&t.position?t.position:"right",this.barBackground=t&&t.barBackground?t.barBackground:"#343a40",this.barOpacity=t&&t.barOpacity?t.barOpacity:"1",this.barWidth=t&&t.barWidth?t.barWidth:"12",this.barBorderRadius=t&&t.barBorderRadius?t.barBorderRadius:"5",this.barMargin=t&&t.barMargin?t.barMargin:"0 0 0 0",this.gridBackground=t&&t.gridBackground?t.gridBackground:"#adb5bd",this.gridOpacity=t&&t.gridOpacity?t.gridOpacity:"1",this.gridWidth=t&&t.gridWidth?t.gridWidth:"8",this.gridBorderRadius=t&&t.gridBorderRadius?t.gridBorderRadius:"10",this.gridMargin=t&&t.gridMargin?t.gridMargin:"0 0 0 0",this.alwaysVisible=!t||void 0===t.alwaysVisible||t.alwaysVisible,this.visibleTimeout=t&&t.visibleTimeout?t.visibleTimeout:1e3,this.alwaysPreventDefaultScroll=!t||void 0===t.alwaysPreventDefaultScroll||t.alwaysPreventDefaultScroll}return t.prototype.merge=function(e){var r=new t;return r.position=e&&e.position?e.position:this.position,r.barBackground=e&&e.barBackground?e.barBackground:this.barBackground,r.barOpacity=e&&e.barOpacity?e.barOpacity:this.barOpacity,r.barWidth=e&&e.barWidth?e.barWidth:this.barWidth,r.barBorderRadius=e&&e.barBorderRadius?e.barBorderRadius:this.barBorderRadius,r.barMargin=e&&e.barMargin?e.barMargin:this.barMargin,r.gridBackground=e&&e.gridBackground?e.gridBackground:this.gridBackground,r.gridOpacity=e&&e.gridOpacity?e.gridOpacity:this.gridOpacity,r.gridWidth=e&&e.gridWidth?e.gridWidth:this.gridWidth,r.gridBorderRadius=e&&e.gridBorderRadius?e.gridBorderRadius:this.gridBorderRadius,r.gridMargin=e&&e.gridMargin?e.gridMargin:this.gridMargin,r.alwaysVisible=e&&void 0!==e.alwaysVisible?e.alwaysVisible:this.alwaysVisible,r.visibleTimeout=e&&e.visibleTimeout?e.visibleTimeout:this.visibleTimeout,r.alwaysPreventDefaultScroll=!e||void 0===e.alwaysPreventDefaultScroll||e.alwaysPreventDefaultScroll,r},t}(),l=function(t){this.scrollPosition=t&&t.scrollPosition?t.scrollPosition:0,this.isScrollAtStart=!t||void 0===t.isScrollAtStart||t.isScrollAtStart,this.isScrollAtEnd=!(!t||void 0===t.isScrollAtEnd)&&t.isScrollAtEnd};Object.create;function h(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,s,o=r.call(t),n=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)n.push(i.value)}catch(t){s={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return n}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}Object.create;var p=function(t){return t},u=function(t){return t*t},c=function(t){return t*(2-t)},g=function(t){return t<.5?2*t*t:(4-2*t)*t-1},y=function(t){return t*t*t},b=function(t){return--t*t*t+1},f=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},m=function(t){return t*t*t*t},v=function(t){return 1- --t*t*t*t},S=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},w=function(t){return t*t*t*t*t},T=function(t){return 1+--t*t*t*t*t},B=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},C={linear:p,inQuad:u,outQuad:c,inOutQuad:g,inCubic:y,outCubic:b,inOutCubic:f,inQuart:m,outQuart:v,inOutQuart:S,inQuint:w,outQuint:T,inOutQuint:B},O=function(){function t(t,r,i,s){this.viewContainer=t,this.renderer=r,this.document=i,this.optionsDefaults=s,this.enabled=!0,this.scrollChanged=new e.EventEmitter,this.barVisibilityChange=new e.EventEmitter,this.el=this.viewContainer.element.nativeElement,this.body=this.document.querySelector("body"),this.mutationThrottleTimeout=50}return t.prototype.ngOnInit=function(){!this.interactionSubscriptions&&this.enabled&&this.setup()},t.prototype.ngOnChanges=function(t){t.enabled&&(this.enabled?this.setup():this.destroy()),t.options&&(this.destroy(),this.setup())},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.setup=function(){var t=this;if(this.interactionSubscriptions=new i.Subscription,this.optionsDefaults?this.options=new a(this.optionsDefaults).merge(this.options):this.options=new a(this.options),this.setStyle(),this.wrapContainer(),this.initGrid(),this.initBar(),this.getBarHeight(),this.initWheel(),this.initDrag(),this.options.alwaysVisible||this.hideBarAndGrid(),MutationObserver&&(this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver((function(){t.mutationThrottleTimeout&&(clearTimeout(t.mutationThrottleTimeout),t.mutationThrottleTimeout=setTimeout(t.onMutation.bind(t),50))})),this.mutationObserver.observe(this.el,{subtree:!0,childList:!0})),this.scrollEvents&&this.scrollEvents instanceof e.EventEmitter){var r=this.scrollEvents.subscribe((function(e){return t.handleEvent(e)}));this.interactionSubscriptions.add(r)}},t.prototype.handleEvent=function(t){if("scrollToBottom"===t.type){var e=this.el.scrollHeight-this.el.clientHeight;this.scrollTo(e,t.duration,t.easing)}else if("scrollToTop"===t.type){e=0;this.scrollTo(e,t.duration,t.easing)}else if("scrollToPercent"===t.type&&t.percent>=0&&t.percent<=100){e=Math.round((this.el.scrollHeight-this.el.clientHeight)/100*t.percent);this.scrollTo(e,t.duration,t.easing)}else if("scrollTo"===t.type){var r=this.el.scrollHeight-this.el.clientHeight;(e=t.y<=r?t.y:r)>=0&&this.scrollTo(e,t.duration,t.easing)}else"recalculate"===t.type&&this.getBarHeight()},t.prototype.setStyle=function(){var t=this.el;this.renderer.setStyle(t,"overflow","hidden")},t.prototype.onMutation=function(){this.getBarHeight(),this.setBarTop()},t.prototype.wrapContainer=function(){this.wrapper=this.renderer.createElement("div");var t=this.wrapper,e=this.el;this.renderer.addClass(t,"slimscroll-wrapper"),this.renderer.setStyle(t,"position","relative"),this.renderer.setStyle(t,"overflow","hidden"),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"margin",getComputedStyle(e).margin),this.renderer.setStyle(t,"width","100%"),this.renderer.setStyle(t,"height",getComputedStyle(e).height),this.renderer.insertBefore(e.parentNode,t,e),this.renderer.appendChild(t,e)},t.prototype.initGrid=function(){this.grid=this.renderer.createElement("div");var t=this.grid;this.renderer.addClass(t,"slimscroll-grid"),this.renderer.setStyle(t,"position","absolute"),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,"bottom","0"),this.renderer.setStyle(t,this.options.position,"0"),this.renderer.setStyle(t,"width",this.options.gridWidth+"px"),this.renderer.setStyle(t,"background",this.options.gridBackground),this.renderer.setStyle(t,"opacity",this.options.gridOpacity),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"cursor","pointer"),this.renderer.setStyle(t,"z-index","99"),this.renderer.setStyle(t,"border-radius",this.options.gridBorderRadius+"px"),this.renderer.setStyle(t,"margin",this.options.gridMargin),this.renderer.appendChild(this.wrapper,t)},t.prototype.initBar=function(){this.bar=this.renderer.createElement("div");var t=this.bar;this.renderer.addClass(t,"slimscroll-bar"),this.renderer.setStyle(t,"position","absolute"),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,this.options.position,"0"),this.renderer.setStyle(t,"width",this.options.barWidth+"px"),this.renderer.setStyle(t,"background",this.options.barBackground),this.renderer.setStyle(t,"opacity",this.options.barOpacity),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"cursor","pointer"),this.renderer.setStyle(t,"z-index","100"),this.renderer.setStyle(t,"border-radius",this.options.barBorderRadius+"px"),this.renderer.setStyle(t,"margin",this.options.barMargin),this.renderer.appendChild(this.wrapper,t),this.barVisibilityChange.emit(!0)},t.prototype.getBarHeight=function(){var t=this.el.offsetHeight,e=Math.max(t/this.el.scrollHeight*t,30)+"px",r=parseInt(e,10)===t?"none":"block";this.wrapper.offsetHeight!==t&&this.renderer.setStyle(this.wrapper,"height",t+"px"),this.renderer.setStyle(this.bar,"height",e),this.renderer.setStyle(this.bar,"display",r),this.renderer.setStyle(this.grid,"display",r),this.barVisibilityChange.emit("none"!==r)},t.prototype.scrollTo=function(t,e,r){var i=this,s=Date.now(),o=this.el.scrollTop,n=parseInt(this.el.style.paddingTop,10)||0,a=parseInt(this.el.style.paddingBottom,10)||0,l=function(){var h=Date.now(),d=Math.min(1,(h-s)/e),p=C[r](d);if(n>0||a>0){var u=null;n>0&&(u=-(p*(t-(u=-n))+u),i.renderer.setStyle(i.el,"padding-top",u+"px")),a>0&&(u=p*(t-(u=a))+u,i.renderer.setStyle(i.el,"padding-bottom",u+"px"))}else i.el.scrollTop=p*(t-o)+o;i.setBarTop(),i.saveCurrent(),i.updateScrollState(),d<1&&requestAnimationFrame(l)};e&&r?requestAnimationFrame(l):(this.el.scrollTop=t,this.setBarTop(),this.saveCurrent(),this.updateScrollState())},t.prototype.scrollContent=function(t,e,r){var i=this,s=t,o=this.el.offsetHeight-this.bar.offsetHeight,n=this.el.scrollHeight-this.el.offsetHeight,a=null;return e&&(((s=parseInt(getComputedStyle(this.bar).top,10)+20*t/100*this.bar.offsetHeight)<0||s>o)&&(a=s>o?s-o:s),s=Math.min(Math.max(s,0),o),s=t>0?Math.ceil(s):Math.floor(s),this.renderer.setStyle(this.bar,"top",s+"px")),s=parseInt(getComputedStyle(this.bar).top,10)/(this.el.offsetHeight-this.bar.offsetHeight)*n,this.el.scrollTop=s,this.showBarAndGrid(),this.options.alwaysVisible||(this.visibleTimeout&&clearTimeout(this.visibleTimeout),this.visibleTimeout=setTimeout((function(){i.hideBarAndGrid()}),this.options.visibleTimeout)),this.updateScrollState(),this.saveCurrent(),a},t.prototype.updateScrollState=function(){var t=0===this.el.scrollTop,e=this.el.scrollTop===this.el.scrollHeight-this.el.offsetHeight,r=Math.ceil(this.el.scrollTop),i=new l({scrollPosition:r,isScrollAtStart:t,isScrollAtEnd:e});this.scrollChanged.emit(i)},t.prototype.initWheel=function(){var t=this,e=i.fromEvent(this.el,"DOMMouseScroll"),r=i.fromEvent(this.el,"mousewheel"),s=i.merge.apply(void 0,d([e,r])).subscribe((function(e){var r=0;e.wheelDelta&&(r=-e.wheelDelta/120),e.detail&&(r=e.detail/3);var i=t.scrollContent(r,!0,!1);e.preventDefault&&(t.options.alwaysPreventDefaultScroll||null===i)&&e.preventDefault()}));this.interactionSubscriptions.add(s)},t.prototype.initDrag=function(){var t=this,e=this.bar,r=i.fromEvent(this.document.documentElement,"mousemove"),o=i.fromEvent(this.document.documentElement,"touchmove"),n=i.fromEvent(e,"mousedown"),a=i.fromEvent(this.el,"touchstart"),l=i.fromEvent(this.document.documentElement,"mouseup"),h=i.fromEvent(this.document.documentElement,"touchend"),p=n.pipe(s.mergeMap((function(i){return t.pageY=i.pageY,t.top=parseFloat(getComputedStyle(e).top),r.pipe(s.map((function(e){return e.preventDefault(),t.top+e.pageY-t.pageY})),s.takeUntil(l))}))),u=a.pipe(s.mergeMap((function(r){return t.pageY=r.targetTouches[0].pageY,t.top=-parseFloat(getComputedStyle(e).top),o.pipe(s.map((function(e){return-(t.top+e.targetTouches[0].pageY-t.pageY)})),s.takeUntil(h))}))),c=i.merge.apply(void 0,d([p,u])).subscribe((function(e){t.body.addEventListener("selectstart",t.preventDefaultEvent,!1),t.renderer.setStyle(t.body,"touch-action","pan-y"),t.renderer.setStyle(t.body,"user-select","none"),t.renderer.setStyle(t.bar,"top",e+"px");var r=t.scrollContent(0,!0,!1),i=t.el.offsetHeight-t.bar.offsetHeight;r&&r<0&&-r<=i?t.renderer.setStyle(t.el,"paddingTop",-r+"px"):r&&r>0&&r<=i&&t.renderer.setStyle(t.el,"paddingBottom",r+"px")})),g=i.merge.apply(void 0,d([l,h])).subscribe((function(){t.body.removeEventListener("selectstart",t.preventDefaultEvent,!1);var e=parseInt(t.el.style.paddingTop,10),r=parseInt(t.el.style.paddingBottom,10);t.renderer.setStyle(t.body,"touch-action","unset"),t.renderer.setStyle(t.body,"user-select","default"),(e>0||r>0)&&t.scrollTo(0,300,"linear")}));this.interactionSubscriptions.add(c),this.interactionSubscriptions.add(g)},t.prototype.setBarTop=function(){var t=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30),e=this.el.scrollHeight-this.el.clientHeight,r=parseInt(this.el.style.paddingBottom,10)||0,i=this.el.scrollTop/e;if(0===r){var s=Math.round((this.el.clientHeight-t)*i);s>0&&this.renderer.setStyle(this.bar,"top",s+"px")}},t.prototype.saveCurrent=function(){var t=this.el.scrollHeight-this.el.clientHeight,e=this.el.scrollTop/t;this.current={max:t,percent:e}},t.prototype.showBarAndGrid=function(){this.renderer.setStyle(this.grid,"background",this.options.gridBackground),this.renderer.setStyle(this.bar,"background",this.options.barBackground)},t.prototype.hideBarAndGrid=function(){this.renderer.setStyle(this.grid,"background","transparent"),this.renderer.setStyle(this.bar,"background","transparent")},t.prototype.preventDefaultEvent=function(t){t.preventDefault(),t.stopPropagation()},t.prototype.destroy=function(){if(this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.el.parentElement.classList.contains("slimscroll-wrapper")){var t=this.el.parentElement,e=t.querySelector(".slimscroll-bar");t.removeChild(e);var r=t.querySelector(".slimscroll-grid");t.removeChild(r),this.unwrap(t)}this.interactionSubscriptions&&this.interactionSubscriptions.unsubscribe()},t.prototype.unwrap=function(t){for(var e=document.createDocumentFragment();t.firstChild;){var r=t.removeChild(t.firstChild);e.appendChild(r)}t.parentNode.replaceChild(e,t)},t.prototype.onResize=function(){var t=Object.assign({},this.current).percent;this.destroy(),this.setup(),this.scrollTo(Math.round((this.el.scrollHeight-this.el.clientHeight)*t),null,null)},t}();O.decorators=[{type:e.Directive,args:[{selector:"[slimScroll]",exportAs:"slimScroll"}]}],O.ctorParameters=function(){return[{type:e.ViewContainerRef,decorators:[{type:e.Inject,args:[e.ViewContainerRef]}]},{type:e.Renderer2,decorators:[{type:e.Inject,args:[e.Renderer2]}]},{type:void 0,decorators:[{type:e.Inject,args:[r.DOCUMENT]}]},{type:void 0,decorators:[{type:e.Inject,args:[n]},{type:e.Optional}]}]},O.propDecorators={enabled:[{type:e.Input}],options:[{type:e.Input}],scrollEvents:[{type:e.Input}],scrollChanged:[{type:e.Output}],barVisibilityChange:[{type:e.Output}],onResize:[{type:e.HostListener,args:["window:resize",[]]}]};var E=function(){};E.decorators=[{type:e.NgModule,args:[{declarations:[O],exports:[O]}]}],t.NgSlimScrollModule=E,t.SLIMSCROLL_DEFAULTS=n,t.SlimScrollDirective=O,t.SlimScrollEvent=o,t.SlimScrollOptions=a,t.SlimScrollState=l,t.easing=C,t.ɵ0=p,t.ɵ1=u,t.ɵ10=w,t.ɵ11=T,t.ɵ12=B,t.ɵ2=c,t.ɵ3=g,t.ɵ4=y,t.ɵ5=b,t.ɵ6=f,t.ɵ7=m,t.ɵ8=v,t.ɵ9=S,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-slimscroll.umd.min.js.map